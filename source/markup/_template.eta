<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">

    <%~
      it.meta?.map(
        metadata => '<meta ' +
                      Object.entries(metadata).map(
                        ([name, content]) =>
                          `${name}="${typeof content == 'string'
                            ? content
                            : Object.entries(content).map(pair => pair.join('=')).join(', ')}"`
                      ).join(' ') +
                    '>'
      ).join() || '';
    %>

    <%~
      it.gfonts ? '<link rel="preconnect" href="https://fonts.googleapis.com">' +
                  '<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>'
                : '';
    %>

    <title><%= it.title %></title>
    <meta name="description" content="<%= it.description %>">

    <%~
      it.gfonts?.map(
        font => `<link href="https://fonts.googleapis.com/css2?family=${font}&display=swap" rel="stylesheet">`
      ).join() || '';
    %>

    <%~
      it.css?.map(
        url => `<link rel="stylesheet" href="${'/assets' + (url.startsWith('/') ? url : '/' + url)}">`
      ).join() || '';
    %>

    <%~
      it.js?.map(
        url => `<script defer src="${'/assets' + (url.startsWith('/') ? url : '/' + url)}"></script>`
      ).join() || '';
    %>
  </head>
  <body>
    <div id="page-container">
      <div id="page-content">
        <%~ it.body %>
      </div>
    </div>
  </body>
</html>